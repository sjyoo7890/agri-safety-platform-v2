# FR-EDU: 안전교육 관리

## 모듈 개요
6종 VR 안전교육 콘텐츠와 4D 시뮬레이터의 관리, 교육 이수 현황 추적, 교육 성취도 AI 분석, 교육 일정 및 응급키트 실습 기록을 관리하는 모듈.

## 접근 권한
- 시스템 관리자: 전체 교육 관리
- 안전교육 관리자: 교육 콘텐츠 등록/수정, 이수현황/성취도 관리
- 농장 관리자: 소속 작업자 이수 현황 조회
- 작업자: 본인 교육 이수 현황 조회 (모바일 웹)

## 기능 요구사항

| ID | 요구사항 | 우선순위 | 상세 설명 |
|----|---------|---------|----------|
| FR-EDU-001 | 교육 콘텐츠 관리 | 상 | 6종 VR 안전교육 콘텐츠(추락/끼임/온열질환/전기화재/차량전복/농기계충돌) 등록, 버전 관리, 배포 상태 관리 |
| FR-EDU-002 | 4D 시뮬레이터 관리 | 상 | 6축 탑승형, 트레드밀형 4D 시뮬레이터 기기 상태 모니터링. 가동 이력, 비상정지 기록 관리 |
| FR-EDU-003 | 교육 이수 현황 | 상 | 작업자별 교육 이수 현황(콘텐츠별 완료 여부, 점수, 이수일) 관리. 미이수자 자동 알림 |
| FR-EDU-004 | 교육 성취도 분석 | 중 | AI 기반 교육 로그 분석 - 학습자 취약점 진단(인지실패, 급조작, 절차누락 등) 및 개인별 재훈련 미션 추천 |
| FR-EDU-005 | 교육 일정 관리 | 중 | 교육 기관별 교육 일정 등록 및 참가자 관리. 순회 교육 스케줄링 |
| FR-EDU-006 | 응급키트 실습 기록 | 중 | 거치형/탑재형 응급키트 실습 교육 프로그램의 수행 기록 및 평가 점수 관리 |

## VR 교육 콘텐츠 목록

| 코드 | 사고유형 | 시나리오 | 시뮬레이터 |
|------|---------|---------|-----------|
| EDU-FALL | 추락/넘어짐 | 사다리 작업 중 미끄러짐, 지붕 작업 중 추락 | 6축 탑승형 |
| EDU-ENTANGLE | 끼임/감김 | 회전축 접근, 벨트 감김, 수확기 투입구 | 트레드밀형 |
| EDU-HEAT | 온열질환/질식 | 고온 비닐하우스, 밀폐 축사 가스 중독 | 6축 탑승형 |
| EDU-FIRE | 전기화재 | 노후 전선 합선, 전기울타리 감전 | 트레드밀형 |
| EDU-ROLLOVER | 차량 전복 | 경사지 트랙터 전복, 과적 상태 급회전 | 6축 탑승형 |
| EDU-COLLISION | 농기계 충돌 | 콤바인 후진 중 작업자 미감지, 교차 작업 | 트레드밀형 |

## 4D 시뮬레이터 사양

| 항목 | 6축 탑승형 | 트레드밀형 |
|------|----------|----------|
| 모션 | 6DOF (상하/좌우/전후/롤/피치/요) | 보행 트레드밀 + 4축 모션 |
| 디스플레이 | VR HMD (Quest 3 등) | VR HMD + 대형 스크린 |
| 효과 | 풍속/진동/온도/냄새 (4D) | 보행 감지 + 4D 효과 |
| 대상 시나리오 | 추락, 온열, 전복 | 끼임, 화재, 충돌 |
| 목표 FPS | 90fps 이상 | 90fps 이상 |
| 목표 지연 | 120ms 미만 | 120ms 미만 |
| 비상정지 | 물리 버튼 (100% 성공률) | 물리 버튼 (100% 성공률) |

## 교육 성취도 분석 항목

AI가 교육 로그에서 분석하는 취약점 유형:
1. **인지실패 (Perception Failure)**: 위험 요소를 인지하지 못함
2. **급조작 (Abrupt Operation)**: 갑작스러운 핸들/페달 조작
3. **절차누락 (Procedure Skip)**: 안전 확인 절차 생략
4. **반응지연 (Delayed Response)**: 위험 감지 후 대응 지연
5. **반복실수 (Repeated Error)**: 동일 실수 반복

## 화면 구성 가이드

### 교육 이수 현황
```
┌──────────────────────────────────────────────────────┐
│ 안전교육 관리                                         │
│ [콘텐츠 관리] [이수 현황] [성취도 분석] [일정] [시뮬레이터]│
├──────────────────────────────────────────────────────┤
│  교육 이수 현황       농장: [전체 ▼]  기간: [2026 ▼]   │
├────┬──────┬──────┬──────┬──────┬──────┬──────┬──────┤
│이름 │추락  │끼임  │온열  │화재  │전복  │충돌  │완료율 │
│홍길동│✅92 │✅88 │✅95 │⬜   │⬜   │✅90 │67%  │
│김철수│✅85 │✅91 │⬜   │✅87 │✅93 │⬜   │67%  │
│박영희│✅90 │✅86 │✅88 │✅92 │✅89 │✅94 │100% │
├────┴──────┴──────┴──────┴──────┴──────┴──────┴──────┤
│ 미이수자: 12명    평균 완료율: 72%                      │
│ [미이수자 알림 발송] [CSV 다운로드]                     │
└──────────────────────────────────────────────────────┘
```

## 관련 API
| Method | Endpoint | 설명 |
|--------|----------|------|
| CRUD | `/api/v1/education/contents` | 교육 콘텐츠 CRUD |
| GET | `/api/v1/education/contents/{id}/versions` | 콘텐츠 버전 이력 |
| GET | `/api/v1/education/progress?farm_id=&worker_id=` | 교육 이수 현황 조회 |
| GET | `/api/v1/education/progress/{worker_id}` | 작업자별 교육 이수 현황 |
| POST | `/api/v1/education/progress` | 교육 이수 기록 등록 |
| GET | `/api/v1/education/analysis/{worker_id}` | 교육 성취도 AI 분석 결과 |
| CRUD | `/api/v1/education/schedules` | 교육 일정 CRUD |
| GET | `/api/v1/education/simulators` | 시뮬레이터 상태 모니터링 |
| POST | `/api/v1/education/kit-training` | 응급키트 실습 기록 등록 |

## 기술 구현 힌트
- **이수 현황 테이블**: 콘텐츠별 완료/미완료를 ✅/⬜ 아이콘으로, 점수 표시. 정렬/필터 기능
- **성취도 분석**: AI 서비스에서 교육 로그 분석 후 취약점 + 재훈련 미션 JSON 반환
- **시뮬레이터 상태**: WebSocket으로 실시간 상태(가동중/대기/점검중/오류) 수신
- **교육 일정**: FullCalendar 라이브러리 활용, 드래그앤드롭 일정 관리
- **콘텐츠 메타데이터**: 시나리오 설명, 소요 시간, 난이도, 대상 시뮬레이터 타입 등 관리
